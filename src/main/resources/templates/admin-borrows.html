<!DOCTYPE html>
<!-- Khai báo tài liệu HTML5 -->
<html lang="vi" xmlns:th="http://www.w3.org/1999/xhtml">
<!-- Khai báo ngôn ngữ tiếng Việt và sử dụng Thymeleaf -->

<head>
    <meta charset="UTF-8">
    <!-- Thiết lập mã hóa UTF-8, hỗ trợ tiếng Việt -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Hỗ trợ giao diện responsive trên thiết bị di động -->

    <title>Admin - Mượn/Trả sách</title>
<<<<<<< HEAD
    <!-- Tiêu đề trang quản trị mượn/trả sách -->

    <!-- Import Bootstrap 5 để thiết kế giao diện -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Import CSS tùy chỉnh bằng Thymeleaf -->
=======
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
>>>>>>> 5554403683ffe526db791dd694c5b1f66284e069
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
<<<<<<< HEAD

<!-- Nhúng header dùng chung của hệ thống -->
<div th:replace="fragments/header :: header"></div>

<!-- Container bao nội dung chính -->
=======
<div th:replace="fragments/header :: header"></div>
>>>>>>> 5554403683ffe526db791dd694c5b1f66284e069
<div class="container my-5">

    <!-- Tiêu đề chức năng -->
    <h2>Quản lý mượn/trả sách</h2>

    <!-- Bảng hiển thị danh sách mượn/trả -->
    <table class="table table-bordered table-hover mt-3">

        <!-- Tiêu đề bảng -->
        <thead class="table-light">
        <tr>
            <!-- Người mượn sách -->
            <th>Người dùng</th>

            <!-- Tên sách -->
            <th>Sách</th>

            <!-- Số lượng mượn -->
            <th>Số lượng</th>

            <!-- Trạng thái mượn/trả -->
            <th>Trạng thái</th>

            <!-- Các thao tác quản lý -->
            <th>Hành động</th>
        </tr>
        </thead>

        <!-- Nội dung bảng được render bằng JavaScript -->
        <tbody id="borrowTable"></tbody>
    </table>
</div>

<!-- Import file JavaScript bên ngoài (nếu có) -->
<script src="script.js"></script>

<script>
    // Dữ liệu mượn/trả giả lập (demo)
    let borrows = [
      {user:"reader@example.com",book:"Book 1",quantity:1,status:"Đang mượn"},
      {user:"reader@example.com",book:"Book 2",quantity:2,status:"Đã trả"}
    ];

    // Hàm render danh sách mượn/trả ra bảng
    function renderBorrows(){
      const tbody = document.getElementById("borrowTable");
      tbody.innerHTML="";
      borrows.forEach((b,index)=>{
        tbody.innerHTML += `<tr>
            <td>${b.user}</td>
            <td>${b.book}</td>
            <td>${b.quantity}</td>
            <td>${b.status}</td>
            <td>
                <!-- Nút đổi trạng thái mượn/trả -->
                <button class="btn btn-sm btn-success me-1" onclick="toggleStatus(${index})">
                    Đổi trạng thái
                </button>

                <!-- Nút xóa giao dịch -->
                <button class="btn btn-sm btn-danger" onclick="deleteBorrow(${index})">
                    Xóa
                </button>
            </td>
        </tr>`;
      });
    }

    // Hàm đổi trạng thái giữa "Đang mượn" và "Đã trả"
    function toggleStatus(index){
      borrows[index].status =
        borrows[index].status==="Đang mượn" ? "Đã trả" : "Đang mượn";
      renderBorrows();
    }

    // Hàm xóa giao dịch mượn/trả
    function deleteBorrow(index){
      if(confirm("Bạn có chắc muốn xóa giao dịch này?")){
        borrows.splice(index,1);
        renderBorrows();
      }
    }

    // Render dữ liệu lần đầu khi tải trang
    renderBorrows();
</script>
</body>
</html>

