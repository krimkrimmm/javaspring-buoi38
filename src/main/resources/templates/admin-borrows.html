<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Mượn/Trả sách</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="container my-5">
    <h2>Quản lý mượn/trả sách</h2>
    <table class="table table-bordered table-hover mt-3">
        <thead class="table-light">
        <tr>
            <th>Người dùng</th>
            <th>Sách</th>
            <th>Số lượng</th>
            <th>Trạng thái</th>
            <th>Hành động</th>
        </tr>
        </thead>
        <tbody id="borrowTable"></tbody>
    </table>
</div>

<script src="script.js"></script>
<script>
    let borrows = [
      {user:"reader@example.com",book:"Book 1",quantity:1,status:"Đang mượn"},
      {user:"reader@example.com",book:"Book 2",quantity:2,status:"Đã trả"}
    ];

    function renderBorrows(){
      const tbody = document.getElementById("borrowTable");
      tbody.innerHTML="";
      borrows.forEach((b,index)=>{
        tbody.innerHTML += `<tr>
            <td>${b.user}</td>
            <td>${b.book}</td>
            <td>${b.quantity}</td>
            <td>${b.status}</td>
            <td>
                <button class="btn btn-sm btn-success me-1" onclick="toggleStatus(${index})">Đổi trạng thái</button>
                <button class="btn btn-sm btn-danger" onclick="deleteBorrow(${index})">Xóa</button>
            </td>
        </tr>`;
      });
    }

    function toggleStatus(index){
      borrows[index].status = borrows[index].status==="Đang mượn"?"Đã trả":"Đang mượn";
      renderBorrows();
    }

    function deleteBorrow(index){
      if(confirm("Bạn có chắc muốn xóa giao dịch này?")){
        borrows.splice(index,1);
        renderBorrows();
      }
    }

    renderBorrows();
</script>
</body>
</html>

