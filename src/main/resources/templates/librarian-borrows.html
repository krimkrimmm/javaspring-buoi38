<!-- Khai báo tài liệu HTML5 -->
<!DOCTYPE html>

<!-- Thẻ html, khai báo namespace Thymeleaf -->
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Khai báo bảng mã ký tự UTF-8 -->
    <meta charset="UTF-8">

    <!-- Tiêu đề trang hiển thị trên trình duyệt -->
    <title>Librarian - Mượn trả</title>

    <!-- Import Bootstrap CSS từ CDN để sử dụng layout và component -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Import file CSS nội bộ của hệ thống -->
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

<!-- Nhúng header dùng chung bằng Thymeleaf fragment -->
<div th:replace="fragments/header :: header"></div>

<!-- Khối nội dung chính -->
<div class="container mt-4">

    <!-- Tiêu đề trang -->
    <h2>Danh sách mượn sách</h2>

    <!-- Bảng hiển thị danh sách các lượt mượn -->
    <table class="table table-bordered">

        <!-- Phần tiêu đề bảng -->
        <thead>
        <tr>
            <th>Người mượn</th>
            <th>Sách</th>
            <th>Số lượng</th>
            <th>Ngày mượn</th>
            <th>Trả sách</th>
        </tr>
        </thead>

        <!-- Phần thân bảng -->
        <tbody>

        <!-- Lặp qua danh sách mượn sách được truyền từ Controller -->
        <tr th:each="b : ${borrows}">

            <!-- Hiển thị tên người mượn -->
            <td th:text="${b.user.fullName}"></td>

            <!-- Hiển thị tên sách -->
            <td th:text="${b.book.title}"></td>

            <!-- Hiển thị số lượng sách mượn -->
            <td th:text="${b.quantity}"></td>

            <!-- Hiển thị ngày mượn -->
            <td th:text="${b.borrowDate}"></td>

            <!-- Cột thao tác trả sách -->
            <td>

                <!-- Form gửi yêu cầu trả sách -->
                <form th:action="@{/librarian/borrows/return/{id}(id=${b.id})}" method="post">

                    <!-- Nút xác nhận trả sách -->
                    <button class="btn btn-success btn-sm">Trả sách</button>
                </form>

            </td>
        </tr>

        </tbody>
    </table>
</div>

</body>
</html>
